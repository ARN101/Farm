<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/21" fx:controller="com.example.farm.FarmFinanceController" spacing="10" style="-fx-background-color: white;">
    <padding>
        <Insets bottom="20" left="20" right="20" top="20"/>
    </padding>

    <HBox spacing="20">
        <Label text="Finance Tracker" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
    </HBox>

    <HBox spacing="20" VBox.vgrow="ALWAYS">
        <!-- Left Side: Inputs -->
        <VBox spacing="15" prefWidth="300" style="-fx-background-color: #f9f9f9; -fx-padding: 15; -fx-background-radius: 5;">
            <Label text="Type" style="-fx-font-weight: bold;"/>
            <HBox spacing="10">
                <RadioButton fx:id="expenseRadio" text="Expense" selected="true">
                    <toggleGroup>
                        <ToggleGroup fx:id="typeGroup"/>
                    </toggleGroup>
                </RadioButton>
                <RadioButton fx:id="incomeRadio" text="Income" toggleGroup="$typeGroup"/>
            </HBox>

            <Label text="Category"/>
            <TextField fx:id="categoryField" promptText="e.g. Feed, Medicine, Sales"/>

            <Label text="Amount"/>
            <TextField fx:id="amountField" promptText="0.00"/>

            <Label text="Date"/>
            <DatePicker fx:id="datePicker"/>

            <Label text="Animal ID (Optional)"/>
            <ComboBox fx:id="animalIdComboBox" prefWidth="270"/>

            <Label text="Notes"/>
            <TextArea fx:id="notesArea" prefRowCount="3"/>

            <Button text="Add Record" onAction="#onAddClick" style="-fx-background-color: #3498db; -fx-text-fill: white;" maxWidth="Infinity"/>
            <Button text="Delete Record" onAction="#onDeleteClick" style="-fx-background-color: #e74c3c; -fx-text-fill: white;" maxWidth="Infinity"/>
            
            <VBox VBox.vgrow="ALWAYS"/> <!-- Spacer -->
            <Button text="Back to Home" onAction="#onBackToHomeClick" maxWidth="Infinity"/>
        </VBox>

        <!-- Right Side: Table and Summary -->
        <VBox spacing="10" HBox.hgrow="ALWAYS">
            <HBox spacing="20" alignment="CENTER_LEFT">
                <Label fx:id="totalIncomeLabel" text="Total Income: 0.00" style="-fx-text-fill: green; -fx-font-weight: bold;"/>
                <Label fx:id="totalExpenseLabel" text="Total Expense: 0.00" style="-fx-text-fill: red; -fx-font-weight: bold;"/>
                <Label fx:id="netProfitLabel" text="Net Profit: 0.00" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
            </HBox>

            <TableView fx:id="financeTable" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="typeColumn" text="Type" prefWidth="80"/>
                    <TableColumn fx:id="categoryColumn" text="Category" prefWidth="120"/>
                    <TableColumn fx:id="amountColumn" text="Amount" prefWidth="80"/>
                    <TableColumn fx:id="dateColumn" text="Date" prefWidth="100"/>
                    <TableColumn fx:id="animalIdColumn" text="Animal ID" prefWidth="80"/>
                    <TableColumn fx:id="notesColumn" text="Notes" prefWidth="150"/>
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>
        </VBox>
    </HBox>
</VBox>
